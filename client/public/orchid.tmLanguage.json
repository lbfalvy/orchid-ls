{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "scopeName": "source.orchid",
  "patterns": [{ "include": "#expression" }],
  "repository": {
    "expression": {
      "patterns": [
        { "include": "#attribute" },
        { "include": "#block-comment" },
        { "include": "#line-comment" },
        { "include": "#special-ops" },
        { "include": "#paren" },
        { "include": "#square" },
        { "include": "#curly" },
        { "include": "#keyword" },
        { "include": "#operator" },
        { "include": "#name" },
        { "include": "#string" }
      ]
    },
    "line-comment": {
      "match": "--.*$",
      "name": "comment.line.double-dash"
    },
    "block-comment": {
      "begin": "--\\[", "end": "\\]--",
      "name": "comment.block"
    },
    "attribute": {
      "begin": "--\\[\\|", "end": "\\|\\]--",
      "name": "comment.block.documentation"
    },
    "special-ops": {
      "match": "(\\s|^|\\b)(::|:=|=(0x|0b|0o)?[\\d_a-fA-FpP.]*=>)(\\s|$|\\b)",
      "name": "keyword"
    },
    "keyword": {
      "match": "\\b(const|import|export|macro)\\b",
      "name": "keyword"
    },
    "operator": {
      "match": "[^a-zA-Z_0-9\\s\\(\\)\\[\\]\\{\\},\\.'\"\\\\]+",
      "name": "keyword.operator"
    },
    "name": {
      "match": "[a-zA-Z_][a-zA-Z0-9_]*",
      "name": "variable.name"
    },
    "string": {
      "begin": "\"",
      "end": "\"",
      "name": "string",
      "patterns": [
        { "name": "constant.character.escape", "match": "\\\\." },
        {
          "name": "string.interpolated",
          "begin": "\\$\\{", "end": "\\}",
          "patterns": [{ "include": "#expression" }]
        }
      ]
    },
    "paren": {
      "begin": "\\(",
      "end": "\\)",
      "beginCaptures": { "0": { "name": "meta.brace.round" }},
      "endCaptures": { "0": { "name": "meta.brace.round" }},
      "name": "meta.block",
      "patterns": [
        { "include": "#expression" }
      ]
    },
    "square": {
      "begin": "\\[",
      "end": "\\]",
      "beginCaptures": { "0": { "name": "meta.brace.square" }},
      "endCaptures": { "0": { "name": "meta.brace.square" }},
      "name": "meta.block",
      "patterns": [
        { "include": "#expression" }
      ]
    },
    "curly": {
      "begin": "{",
      "end": "}",
      "beginCaptures": { "0": { "name": "meta.brace.curly" }},
      "endCaptures": { "0": { "name": "meta.brace.curly" }},
      "name": "meta.block",
      "patterns": [
        { "include": "#expression" }
      ]
    }
  }
}